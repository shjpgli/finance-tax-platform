<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.abc12366.cms.mapper.db2.ContentRoMapper">

	<!-- 通用查询结果列-->
	<sql id="Base_Column_List">
		contentId,	channelId,	typeId,	modelId,	siteId,	sortDate,	topLevel,	hasTitleImg,	isRecommend,	status,	viewsDay,	commentsDay,	downloadsDay,	upsDay,	recommendLevel
	</sql>

	<!-- 查询（根据主键ID查询） -->
	<select id="selectByPrimaryKey" resultType="com.abc12366.cms.model.Content" parameterType="java.lang.String">
		 SELECT
		 <include refid="Base_Column_List" />
		 FROM cms_content
		 WHERE contentId = #{contentId}
	</select>

	<!-- 查询（根据查询条件查询） -->
	<select id="selectList" resultType="com.abc12366.cms.model.bo.ContentListBo" parameterType="java.util.Map">
		SELECT
			a.contentId contentId,
			b.title title,
			b.titleColor titleColor,
			a.channelId channelId,
			c.channelName channelName,
			a.topLevel topLevel,
			a.typeId typeId,
			d.typeName typeName,
			b.author author,
			e.views views,
			b.releaseDate releaseDate,
			a.status STATUS,
			b.needRegenerate needRegenerate,
			a.recommendLevel recommendLevel
		FROM cms_content a,cms_content_ext b,cms_channel_ext c,cms_content_type d,cms_content_count e
		WHERE a.contentId = b.contentId AND a.channelId = c.channelId AND a.typeId = d.typeId AND a.contentId = e.contentId
		<if test="title != null and title != ''">
			AND title like CONCAT('%',#{title},'%')
		</if>
		<if test="author != null and author != ''">
			AND author like CONCAT('%',#{author},'%')
		</if>
		<if test="typeId != null and typeId != ''">
			AND typeId = #{typeId}
		</if>
		ORDER BY a.topLevel,a.recommendLevel,b.releaseDate DESC

	</select>


	<!-- 查询（根据contentId查询） -->
	<select id="selectByContentId" resultType="com.abc12366.cms.model.Content" parameterType="java.lang.String">
		SELECT
		<include refid="Base_Column_List" />
		FROM cms_content
		WHERE contentId = #{contentId}
	</select>



</mapper>