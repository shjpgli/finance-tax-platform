<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.abc12366.cms.mapper.db1.VoteMapper">

    <!-- 通用查询结果列-->
    <sql id="Base_Column_List">
		id, name, startTime, endTime, isLogin, channel, status, createTime, lastUpdate
	</sql>

    <sql id="Result_Column_List">
        id, voteId, subjectId, itemId, userId, openId, ip, createTime
    </sql>

    <insert id="insert" parameterType="com.abc12366.cms.model.Vote">
        INSERT INTO cms_vote (<include refid="Base_Column_List"/>)
        VALUES (#{id}, #{name}, #{startTime}, #{endTime}, #{isLogin}, #{channel}, #{status}, #{createTime}, #{lastUpdate})
    </insert>

    <update id="update" parameterType="com.abc12366.cms.model.Vote">
        UPDATE cms_vote
        <set>
            <if test="name != null">name = #{name},</if>
            <if test="startTime != null">startTime = #{startTime},</if>
            <if test="endTime != null">endTime = #{endTime},</if>
            <if test="isLogin != null">isLogin = #{isLogin},</if>
            <if test="status != null">status = #{status},</if>
            <if test="lastUpdate != null">lastUpdate = #{lastUpdate},</if>
            <if test="channel != null">channel = #{channel},</if>
        </set>
        WHERE id = #{id}
    </update>

    <delete id="delete" parameterType="java.lang.String">
        DELETE FROM cms_vote WHERE id = #{id}
    </delete>

    <insert id="insertResult" parameterType="com.abc12366.cms.model.VoteResult">
        INSERT INTO cms_vote_result (<include refid="Result_Column_List"/>)
        VALUES (#{id}, #{voteId}, #{subjectId}, #{itemId}, #{userId}, #{openId}, #{ip}, #{createTime})
    </insert>
</mapper>