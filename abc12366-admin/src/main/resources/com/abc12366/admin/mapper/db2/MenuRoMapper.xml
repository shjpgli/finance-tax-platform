<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.abc12366.admin.mapper.db2.MenuRoMapper">

    <sql id="Base_Column_List">
        menuId, menuName, menuUrl, parentId,  perms, type, icon, sort, status, remark
    </sql>
    <select id="selectList" resultType="Menu" parameterType="Menu">
        select
        <include refid="Base_Column_List" />
        from sys_menu
        <where>
            1=1
            <if test="menuName != null  and menuName!=''"> AND menuName LIKE CONCAT('%',#{menuName},'%')</if>
            <if test="parentId != null and parentId!=''"> AND parentId = #{parentId}</if>
            <if test="type != null and type!=''"> AND type = #{type}</if>
        </where>
    </select>

    <select id="selectByParentId" resultType="Menu">
        select
        <include refid="Base_Column_List" />
        from sys_menu
        where parentId = #{parentId}
    </select>

    <select id="selectFirstLevel" resultType="Menu">
        select
        <include refid="Base_Column_List" />
        from sys_menu
        where parentId IS NULL
    </select>

    <select id="selectByMenuId" resultType="Menu">
        select
        <include refid="Base_Column_List" />
        from sys_menu
        where menuId = #{menuId}
    </select>

    <select id="selectByMenuName" resultType="Menu">
        select
        <include refid="Base_Column_List" />
        from sys_menu
        where menuName = #{menuName}
    </select>

    <select id="selectMenuByRoleId" resultType="Menu">
        SELECT
        m.menuId,
        m.menuName,
        m.menuUrl,
        m.parentId,
        m.perms,
        m.type,
        m.icon,
        m.sort,
        m.STATUS,
        m.remark
        FROM
        sys_menu m
        LEFT JOIN sys_role_menu r ON m.menuId = r.menuId
        <where>
            r.roleId = #{roleId}
        </where>
    </select>

</mapper>